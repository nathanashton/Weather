<Window x:Class="Weather.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
          xmlns:userControls="clr-namespace:Weather.UserControls"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" WindowStartupLocation="CenterScreen" WindowState="Maximized"
        Title="Weather" Height="600" Width="800" MinHeight="350" MinWidth="500">
    <Window.Resources>
        <Storyboard x:Key="ShowDebugPanel">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="dpanel">
                <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="150" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="dpanel">
                <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="CloseDebugPanel">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="dpanel">
                <EasingDoubleKeyFrame KeyTime="0" Value="150" />
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="dpanel">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.4" Value="{x:Static Visibility.Collapsed}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <BooleanToVisibilityConverter x:Key="BoolVisConverter" />
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Setup">
                <MenuItem Header="Units" Command="{Binding UnitsWindowCommand}" />
                <MenuItem Header="Sensor Types" Command="{Binding SensorTypesWindowCommand}" />
                <MenuItem Header="Sensors"  Command="{Binding SensorsWindowCommand}" />
                <MenuItem Header="Weather Stations" Command="{Binding WeatherStationsCommand}" />
                <Separator />
                <MenuItem Header="_Options" Command="{Binding OptionsWindowCommand}" />
            </MenuItem>
            <MenuItem Header="_Test">
                <MenuItem Header="Throw Unhandled Exception" Command="{Binding ThrowException}" />
                <MenuItem IsCheckable="True" IsChecked="{Binding DebugPanelVisible, Mode=TwoWay}" Header="Debug Panel" Command="{Binding DebugPanel}" />
            </MenuItem>
        </Menu>

        <DockPanel DockPanel.Dock="Top" Height="30" Style="{DynamicResource Header}" />

        <Border Height="25" DockPanel.Dock="Bottom" BorderThickness="0,1,0,0" BorderBrush="DarkGray">
            <StatusBar Height="25" Margin="0" Padding="0" Style="{DynamicResource HeaderStatus}">
                <DockPanel Height="25" Margin="0" Style="{DynamicResource Header}"
                Width="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type StatusBar}}}"
                LastChildFill="True" VerticalAlignment="Stretch">
                    <Label Style="{DynamicResource HeaderLabel}" HorizontalContentAlignment="Right" HorizontalAlignment="Right"  Padding="0" Margin="0,0,10,0" Content="{Binding Clock}" />
                </DockPanel>
            </StatusBar>
        </Border>

        <Grid Style="{DynamicResource MainGrid }">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="200" />
            </Grid.ColumnDefinitions>

            <userControls:StationSidePanel Grid.Column="1" Margin="5" />

            <Grid Background="Transparent" Margin="5,5,0,5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.3*" />
                    <RowDefinition Height="0.3*" />
                    <RowDefinition Height="0.3*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.25*" />
                        <ColumnDefinition Width="0.25*" />
                        <ColumnDefinition Width="0.25*" />
                        <ColumnDefinition Width="0.25*" />
                    </Grid.ColumnDefinitions>
                    <Border Grid.Column="0" BorderBrush="DarkGray" BorderThickness="1" Margin="0,0,5,0">
                        <DockPanel VerticalAlignment="Stretch" Style="{DynamicResource Header}">
                            <DockPanel  Style="{DynamicResource HeaderBG}"  Height="25" DockPanel.Dock="Top">
                                <Label Content="Min / Max Day"  Style="{DynamicResource HeaderLabel}" />
                            </DockPanel>
                            <Grid />
                        </DockPanel>
                    </Border>

                    <Border Grid.Column="1" BorderBrush="DarkGray" BorderThickness="1" Margin="0,0,5,0">
                        <DockPanel VerticalAlignment="Stretch" Style="{DynamicResource Header}">
                            <DockPanel  Style="{DynamicResource HeaderBG}"  Height="25" DockPanel.Dock="Top">
                                <Label Content="Min / Max Month"  Style="{DynamicResource HeaderLabel}" />
                            </DockPanel>
                            <Grid />
                        </DockPanel>
                    </Border>

                    <Border Grid.Column="2" BorderBrush="DarkGray" BorderThickness="1" Margin="0,0,5,0">
                        <DockPanel VerticalAlignment="Stretch" Style="{DynamicResource Header}">
                            <DockPanel  Style="{DynamicResource HeaderBG}"  Height="25" DockPanel.Dock="Top">
                                <Label Content="Min / Max Year"  Style="{DynamicResource HeaderLabel}" />
                            </DockPanel>
                            <Grid />
                        </DockPanel>
                    </Border>

                    <Border Grid.Column="3" BorderBrush="DarkGray" BorderThickness="1">
                        <DockPanel VerticalAlignment="Stretch" Style="{DynamicResource Header}">
                            <DockPanel  Style="{DynamicResource HeaderBG}"  Height="25" DockPanel.Dock="Top">
                                <Label Content="Timeline"  Style="{DynamicResource HeaderLabel}" />
                            </DockPanel>
                            <Grid />
                        </DockPanel>
                    </Border>
                </Grid>

                <userControls:ChartPanel Grid.Row="1" Margin="0,5,0,0" />

                <userControls:ChartPanel Grid.Row="2" Margin="0,5,0,0" />
            </Grid>

            <!--<DataGrid Grid.Row="0" VerticalAlignment="Stretch" EnableColumnVirtualization="True" EnableRowVirtualization="True" Name="dg" CanUserAddRows="False"
                  RowHeaderWidth="0" IsReadOnly="True" AutoGenerateColumns="False" />-->

            <DockPanel  Name="dpanel"  Height="150" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" Background="Black" Visibility="{Binding DebugPanelVisible, Converter={StaticResource BoolVisConverter}}">
                <Label DockPanel.Dock="Top" Background="Black" Foreground="Yellow" Content="DEBUG" />
                <ScrollViewer Margin="10,0,0,0" Name="scroll" Background="Black" VerticalAlignment="Stretch"  VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <TextBlock Padding="5" FontSize="11" Text="{Binding DebugPanel}" Background="Black" Foreground="Yellow" />
                </ScrollViewer>
            </DockPanel>
        </Grid>
    </DockPanel>
</Window>